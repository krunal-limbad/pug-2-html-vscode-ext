{"version":3,"file":"extension.js","mappings":"kCAAAA,EAAOC,QAAUC,QAAQ,S,SCAzBF,EAAOC,QAAUC,QAAQ,gB,GCCrBC,EAA2B,CAAC,EAGhC,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqBE,IAAjBD,EACH,OAAOA,EAAaL,QAGrB,IAAID,EAASG,EAAyBE,GAAY,CAGjDJ,QAAS,CAAC,GAOX,OAHAO,EAAoBH,GAAUL,EAAQA,EAAOC,QAASG,GAG/CJ,EAAOC,OACf,C,uGCtBA,cACA,SAEA,oBAAyBQ,GACxB,IAAIC,EAAY,IAAIC,EAAYF,GAEhCG,EAAOC,SAASC,gBAAgB,2CAA2C,KAC1EJ,EAAUK,WAAY,CAAI,IAG3BH,EAAOC,SAASC,gBAAgB,4CAA4C,KAC3EJ,EAAUK,WAAY,CAAK,IAG5BH,EAAOI,UAAUC,0BAAyB,KACzCP,EAAUQ,YAAY,IAGvBN,EAAOI,UAAUG,uBAAuBC,IACnC,CAAC,OAAQ,OAAOC,QAAQD,EAASE,aAAe,GACnDZ,EAAUa,cAAcH,EAASI,S,GAGpC,EAEA,wBAA+B,EAW/B,MAAMb,EAKL,WAAAc,CAAYhB,GACXiB,KAAKC,SAAWlB,EAChBiB,KAAKE,eAAiBhB,EAAOiB,OAAOC,oBAAoB,cACxDJ,KAAKR,YACN,CAEO,OAAAa,CAAQC,EAAiBC,GAC3BA,IACHP,KAAKE,eAAeM,QACpBR,KAAKE,eAAeO,MAAK,IAE1BT,KAAKE,eAAeQ,WAAWJ,EAChC,CAEA,aAAWjB,GACV,QAASW,KAAKC,SAASU,YAAYC,IAAI,aAAa,EACrD,CAEA,aAAWvB,CAAUwB,GACpBb,KAAKC,SAASU,YAAYG,OAAO,YAAaD,GAC9Cb,KAAKK,QAAQ,+BAA+BL,KAAKX,UAAY,UAAY,cAC1E,CAEO,aAAAQ,CAAckB,GACpB,IAAIC,EAAc,QAAQD,KACtBf,KAAKiB,QAAQC,OAAOC,SACvBH,GAAe,OAEhB,IAAII,GAAQ,IAAAC,MAAKL,GACbI,GAEHA,GAAOE,QAAQC,GAAG,QAAQC,GAAQxB,KAAKK,QAAQmB,GAAM,KACrDJ,EAAMG,GAAG,SAAUE,IAClBzB,KAAKK,QAAQoB,EAAEnB,SAAS,EAAK,KAG9BN,KAAKK,QAAQ,cAAc,EAE7B,CAEO,UAAAb,GACNQ,KAAKiB,QAAqB/B,EAAOI,UAAUoC,iBAAiB,YAAYd,IAAI,YAC7E,E","sources":["webpack://pug2html/external commonjs \"vscode\"","webpack://pug2html/external node-commonjs \"child_process\"","webpack://pug2html/webpack/bootstrap","webpack://pug2html/./src/extension.ts"],"sourcesContent":["module.exports = require(\"vscode\");","module.exports = require(\"child_process\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","import { exec } from 'child_process';\nimport * as vscode from 'vscode';\n\nexport function activate(context: vscode.ExtensionContext) {\n\tlet extension = new Pug2HtmlExt(context);\n\n\tvscode.commands.registerCommand('extension.pug2html.enablePug2HtmlOnSave', () => {\n\t\textension.isEnabled = true;\n\t});\n\n\tvscode.commands.registerCommand('extension.pug2html.disablePug2HtmlOnSave', () => {\n\t\textension.isEnabled = false;\n\t});\n\n\tvscode.workspace.onDidChangeConfiguration(() => {\n\t\textension.loadConfig();\n\t});\n\n\tvscode.workspace.onDidSaveTextDocument((document: vscode.TextDocument) => {\n\t\tif (['jade', 'pug'].indexOf(document.languageId) >= 0) {\n\t\t\textension.convertToHtml(document.fileName);\n\t\t}\n\t});\n}\n\nexport function deactivate() { }\n\n\ninterface ExtConfig {\n\tpretty: {\n\t\tenable: boolean\n\t},\n\tadditionalCommandLineParams?: string\n}\n\n\nclass Pug2HtmlExt {\n\tprivate _outputChannel!: vscode.OutputChannel;\n\tprivate _context!: vscode.ExtensionContext;\n\tprivate _config!: ExtConfig;\n\n\tconstructor(context: vscode.ExtensionContext) {\n\t\tthis._context = context;\n\t\tthis._outputChannel = vscode.window.createOutputChannel('Pug 2 Html');\n\t\tthis.loadConfig();\n\t}\n\n\tpublic sendLog(message: string, hasError?: boolean) {\n\t\tif (hasError) {\n\t\t\tthis._outputChannel.clear();\n\t\t\tthis._outputChannel.show(true);\n\t\t}\n\t\tthis._outputChannel.appendLine(message);\n\t}\n\n\tpublic get isEnabled(): boolean {\n\t\treturn !!this._context.globalState.get('isEnabled', true);\n\t}\n\n\tpublic set isEnabled(value: boolean) {\n\t\tthis._context.globalState.update('isEnabled', value);\n\t\tthis.sendLog(`Convert Pug To HTML On Save ${this.isEnabled ? 'enabled' : 'disabled'}.`);\n\t}\n\n\tpublic convertToHtml(filePath: string) {\n\t\tlet commandText = `pug \"${filePath}\"`;\n\t\tif (this._config.pretty.enable) {\n\t\t\tcommandText += ` -P`;\n\t\t}\n\t\tlet child = exec(commandText);\n\t\tif (child) {\n\t\t\t// child.stdout?.on('data', data => this.sendLog(data));\n\t\t\tchild?.stderr?.on('data', data => this.sendLog(data, true));\n\t\t\tchild.on('error', (e) => {\n\t\t\t\tthis.sendLog(e.message, true);\n\t\t\t});\n\t\t} else {\n\t\t\tthis.sendLog('child null', true);\n\t\t}\n\t}\n\n\tpublic loadConfig() {\n\t\tthis._config = <ExtConfig>vscode.workspace.getConfiguration('pug2html').get('extension');\n\t}\n}\n"],"names":["module","exports","require","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","context","extension","Pug2HtmlExt","vscode","commands","registerCommand","isEnabled","workspace","onDidChangeConfiguration","loadConfig","onDidSaveTextDocument","document","indexOf","languageId","convertToHtml","fileName","constructor","this","_context","_outputChannel","window","createOutputChannel","sendLog","message","hasError","clear","show","appendLine","globalState","get","value","update","filePath","commandText","_config","pretty","enable","child","exec","stderr","on","data","e","getConfiguration"],"sourceRoot":""}